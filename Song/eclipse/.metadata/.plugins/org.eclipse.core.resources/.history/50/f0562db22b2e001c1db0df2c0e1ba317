import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.LinkedList;
import java.util.List;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.FileInputStream;



public class Prac_SongLoader  {


    public List<String> loadFile(String csvFilePath) throws FileNotFoundException {
        // TODO Auto-generated method stub
    	System.out.println(csvFilePath);
    	BufferedReader br = null;
    	
    	try {
    	br = new BufferedReader(new InputStreamReader(new FileInputStream(csvFilePath),"UTF-8"));

    	
    	String line ="";
    	List<String> File_line = new LinkedList();
    	
    	while ((line = br.readLine()) != null) {
    		File_line.add(line);
    		}
    	
    	File_line.remove(0);
    	return File_line;
    	
    	} catch(Exception e) {
    		e.printStackTrace();
    		return null;
    	} 
 
   }



    public List<String> loadAllFilesInDirectory(String directoryPath) throws FileNotFoundException {
        // TODO Auto-generated method stub
    	
    	File file = new File(directoryPath);
    	
    	String[] fileList = file.list();    	
    	List<String> File_list = new LinkedList();
    	
    	for (String name : fileList)
    	{
    		String tmp;
    		tmp=directoryPath+"\\"+name;
    		File_list.add(tmp);
    	}
    	    	
        return File_list;
    }
    	
 
               
        public static void main(String args[]) throws IOException {
        	
        	Prac_SongLoader A = new Prac_SongLoader();        	
        	String k = "C:\\Users\\yoonc\\Desktop\\lecture note\\CS 400\\homework\\Song\\data";
        	List<String> B = new LinkedList();
        	B = A.loadAllFilesInDirectory(k);        	
        	List<String> C1 = new LinkedList();
        	C1 = A.loadFile(B.get(0));
     
  
        	List<Prac_SongData> D1 = new LinkedList();
        	
        	for (String line_data : C1 )
        	{
        		Prac_SongData song_d = new Prac_SongData(line_data,B.get(0));
        		D1.add(song_d);
        	}
        	
        	//System.out.println(D1.size());
        	
        	String kk = "C:\\Users\\yoonc\\Desktop\\lecture note\\CS 400\\homework\\Song\\data\\test.csv";
        	
        	File csv = new File(kk);
        	BufferedWriter bw = null;
        	String line = "";
        	
        	
        	
        	try {
        	bw = new BufferedWriter(new FileWriter(csv, true));
        	for (int i = 0; i < D1.size(); i++) {
                String aData = "";
                aData = D1.get(i).getTitle() + "," + D1.get(i).getArtist() + "," + D1.get(i).getYearPublished();
                bw.write(aData);
                bw.newLine();
        	}
            }catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        	
   
        	
        	//System.out.println("====================");
        	
        	List<String> C2 = new LinkedList();
        	
        	C2 = A.loadFile(B.get(1));
        	List<Prac_SongData> D2 = new LinkedList();
        	
        	for (String line_data : C2 )
        	{
        		Prac_SongData song_d = new Prac_SongData(line_data,B.get(1));
        		D2.add(song_d);
        	}
        	
        	System.out.println(D2.size());
     
  
        }
    }
